---
// Header.astro - Modern navigation header with smooth animations
import { Astro } from 'astro';

// Get the current URL to determine active page
const currentPath = Astro.url.pathname;
---

<header class="header">
	<nav class="nav-container">
		<div class="nav-brand">
			<a href="/" class="brand-link">
				<div class="logo">
					<img src="/images/logo/logosmall.fw_.png" alt="Secudat" class="company-logo" />
				</div>
			</a>
		</div>

		<div class="nav-menu" id="nav-menu">
			<a href="/" class={`nav-link ${currentPath === '/' ? 'active' : ''}`}>Home</a>
			<a href="/diensten" class={`nav-link ${currentPath === '/diensten' ? 'active' : ''}`}>Diensten</a>
			<a href="/over-ons" class={`nav-link ${currentPath === '/over-ons' ? 'active' : ''}`}>Over Ons</a>
			<a href="/#contact" class="nav-link">Contact</a>
		</div>

		<div class="nav-toggle" id="nav-toggle">
			<span class="bar"></span>
			<span class="bar"></span>
			<span class="bar"></span>
		</div>
	</nav>
</header>

<style>
	.header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		background: rgba(255, 255, 255, 0.95);
		backdrop-filter: blur(10px);
		box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
		z-index: 1000;
		transition: all 0.3s ease;
	}

	.nav-container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 20px;
		height: 80px;
		display: flex;
		align-items: center;
		justify-content: space-between;
	}

	.nav-brand {
		display: flex;
		align-items: center;
	}

	.brand-link {
		text-decoration: none;
		color: inherit;
	}

	.logo {
		display: flex;
		align-items: center;
		gap: 12px;
		font-weight: 700;
		font-size: 24px;
		color: #2c3e50;
		transition: transform 0.3s ease;
	}

	.logo:hover {
		transform: scale(1.05);
	}

	.company-logo {
		height: 40px;
		width: auto;
		transition: transform 0.3s ease;
	}

	.logo:hover .company-logo {
		transform: scale(1.05);
	}

	.nav-menu {
		display: flex;
		gap: 40px;
		align-items: center;
	}

	.nav-link {
		text-decoration: none;
		color: #2c3e50;
		font-weight: 500;
		font-size: 16px;
		transition: all 0.3s ease;
		position: relative;
		padding: 8px 0;
	}

	.nav-link::after {
		content: '';
		position: absolute;
		bottom: 0;
		left: 0;
		width: 0;
		height: 2px;
		background: #25c1ce;
		transition: width 0.3s ease;
	}

	.nav-link:hover {
		color: #25c1ce;
	}

	.nav-link:hover::after {
		width: 100%;
	}

	.nav-link.active {
		color: #25c1ce;
	}

	.nav-link.active::after {
		width: 100%;
	}

	.nav-toggle {
		display: none;
		flex-direction: column;
		cursor: pointer;
		gap: 4px;
		padding: 10px;
	}

	.bar {
		width: 25px;
		height: 3px;
		background: #2c3e50;
		transition: all 0.3s ease;
		border-radius: 2px;
	}

	/* Mobile menu animations */
	.nav-toggle.active .bar:nth-child(1) {
		transform: rotate(45deg) translate(5px, 5px);
	}

	.nav-toggle.active .bar:nth-child(2) {
		opacity: 0;
	}

	.nav-toggle.active .bar:nth-child(3) {
		transform: rotate(-45deg) translate(7px, -6px);
	}

	/* Responsive design */
	@media (max-width: 768px) {
		.nav-toggle {
			display: flex;
		}

		.nav-menu {
			position: fixed;
			top: 80px;
			left: -100%;
			width: 100%;
			height: calc(100vh - 80px);
			background: rgba(255, 255, 255, 0.98);
			backdrop-filter: blur(10px);
			flex-direction: column;
			justify-content: flex-start;
			padding: 40px 20px;
			gap: 30px;
			transition: left 0.3s ease;
			box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
		}

		.nav-menu.active {
			left: 0;
		}

		.nav-link {
			font-size: 20px;
			padding: 15px 0;
			border-bottom: 1px solid rgba(37, 193, 206, 0.1);
			width: 100%;
			text-align: center;
		}

		.nav-link::after {
			display: none;
		}
	}

	/* Scroll effect */
	.header.scrolled {
		background: rgba(255, 255, 255, 0.98);
		box-shadow: 0 4px 30px rgba(0, 0, 0, 0.15);
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const navToggle = document.getElementById('nav-toggle');
		const navMenu = document.getElementById('nav-menu');
		const header = document.querySelector('.header');
		const navLinks = document.querySelectorAll('.nav-link');

		// Mobile menu toggle
		navToggle?.addEventListener('click', () => {
			navToggle.classList.toggle('active');
			navMenu.classList.toggle('active');
		});

		// Close mobile menu when clicking a link
		navLinks.forEach(link => {
			link.addEventListener('click', () => {
				navToggle.classList.remove('active');
				navMenu.classList.remove('active');
			});
		});

		// Scroll effect for header
		let lastScroll = 0;
		window.addEventListener('scroll', () => {
			const currentScroll = window.pageYOffset;

			if (currentScroll > 50) {
				header.classList.add('scrolled');
			} else {
				header.classList.remove('scrolled');
			}

			lastScroll = currentScroll;
		});

		// Smooth scrolling for anchor links and navigation
		navLinks.forEach(link => {
			link.addEventListener('click', (e) => {
				const href = link.getAttribute('href');

				// Handle external links normally
				if (href.startsWith('/')) {
					return; // Let normal navigation handle page links
				}

				// Handle anchor links on same page
				if (href.startsWith('#')) {
					e.preventDefault();
					const targetElement = document.querySelector(href);

					if (targetElement) {
						const offsetTop = targetElement.offsetTop - 80; // Account for fixed header
						window.scrollTo({
							top: offsetTop,
							behavior: 'smooth'
						});
					}
				}
			});
		});
	});
</script>